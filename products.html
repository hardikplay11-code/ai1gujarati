<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Products - Ai1 Gujarati Snacks</title>

  <style>
    * { box-sizing: border-box; margin:0; padding:0; }
    :root{ --accent:#ff9933; --wh:#25d366; --bg:#fff4e0; --card:#fff; }
    body { font-family: 'Segoe UI', Roboto, Arial, sans-serif; background: var(--bg); color:#3a2e25; }

    header { 
      position: sticky; top:0; 
      background:#fff4e0; padding:18px 12px; 
      display:flex; align-items:center; justify-content:space-between;
      z-index:1000;
    }
    header h1 { font-size:20px; font-weight:800; }

    /* Cart Icon Badge */
    #cartBadge {
      position:absolute; 
      top:-6px; right:-10px;
      background:#ff9933;
      color:white;
      padding:2px 6px;
      border-radius:50%;
      font-size:12px;
    }

    .container{ max-width:1100px; margin:0 auto; padding:18px; }
    .section-title { text-align:center; font-size:32px; font-weight:800; margin-top:40px; margin-bottom:20px; color:#3a2e25; }
    .products { 
      padding: 18px 0 40px; 
      display: grid; 
      grid-template-columns: repeat(3, 1fr); 
      gap: 18px; 
    }
    .card { 
      background: var(--card); 
      border-radius: 14px; 
      padding: 14px; 
      box-shadow: 0 6px 18px rgba(0,0,0,0.08); 
      position:relative; 
      display:flex; flex-direction:column; gap:8px;
    }

    .actions{ display:flex; gap:8px; margin-top:10px; align-items:center; }
    .btn { display:inline-flex; align-items:center; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; border:none; }
    .whatsapp-btn{ background:var(--wh); color:#fff; text-decoration:none; }
    .cart-btn{ background:var(--accent); color:#fff; }

    /* CART SHEET */
    #cartSheet {
      position: fixed; left: 0; right: 0; bottom: -100%; height: 72%; background: #ffffffcc; backdrop-filter: blur(12px); border-radius: 24px 24px 0 0; box-shadow: 0 -10px 25px rgba(0,0,0,0.15); transition: bottom .35s cubic-bezier(.25,.8,.25,1); z-index: 9999; padding: 20px; overflow-y: auto;
    }
    #cartSheet.show { bottom: 0; }

    .cart-item { display: flex; gap: 12px; padding: 12px; border-radius: 14px; background: white; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); }
    .cart-item img { width: 68px; height: 68px; border-radius: 12px; object-fit: cover; }
    .cart-info { flex: 1; }
    .cart-title { font-size: 16px; font-weight: 700; }
    .cart-weight { font-size: 13px; color:#777; margin-top: 2px; }
    .cart-qty { display:flex; align-items:center; gap:10px; margin-top:8px; }
    .cart-qty button{ width:30px; height:30px; background:#ff9933; border:none; color:white; border-radius:8px; font-size:18px; cursor:pointer; }
    .cart-remove{ font-size:13px; color:red; cursor:pointer; margin-top:5px; }
    #cartTotalBar { position: sticky; bottom: 0; background: white; padding: 14px 18px; border-radius: 16px; box-shadow: 0 -5px 15px rgba(0,0,0,0.12); margin-top: 12px; }
    #checkoutBtn { width: 100%; padding: 14px; background: #ff9933; border: none; color: white; font-size: 18px; font-weight: 700; border-radius: 14px; margin-top: 10px; cursor: pointer; }

    /* ORDER SHEET */
    #orderSheet { position: fixed; left:0; right:0; bottom:-110%; height:78%; background:#ffffffee; backdrop-filter: blur(10px); border-radius:20px 20px 0 0; box-shadow:0 -12px 30px rgba(0,0,0,0.18); transition: bottom .35s cubic-bezier(.25,.8,.25,1); z-index:10010; padding:18px; overflow-y:auto; }
    #orderSheet.show { bottom: 0; }
    .order-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
    .order-product { display:flex; gap:12px; align-items:center; padding:12px; background:white; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06); }
    .order-product img { width:80px; height:80px; object-fit:cover; border-radius:10px; }
    .order-product .meta { flex:1; }
    .order-meta-title { font-weight:800; font-size:16px; }
    .order-meta-weight { font-size:13px; color:#666; margin-top:4px; }
    .order-qty button { width:36px; height:36px; border-radius:10px; background:var(--accent); color:white; border:none; font-size:20px; cursor:pointer; }
    .order-actions .btn { flex:1; text-align:center; }
    .order-info .fc-field { margin-top:8px; width:100%; padding:10px; border-radius:8px; border:1px solid #ddd; }
    .order-price { margin-top:12px; display:flex; justify-content:space-between; font-weight:800; font-size:18px; }

    @media (max-width:520px){ .order-product img { width:72px; height:72px; } #orderSheet { height:86%; } }
  @media (max-width: 900px) {
  .products {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 600px) {
  .products {
    grid-template-columns: repeat(1, 1fr);
  }
}
.products {
  gap: 30px !important;
}

.card {
  padding: 20px !important;
  border-radius: 18px !important;
  box-shadow: 0 6px 20px rgba(0,0,0,0.10) !important;
  transition: transform 0.25s ease, box-shadow 0.25s ease !important;
}

.card img {
  height: 240px !important;
  border-radius: 16px !important;
  transition: transform 0.3s ease !important;
}

.card:hover {
  transform: translateY(-6px) !important;
  box-shadow: 0 10px 28px rgba(0,0,0,0.15) !important;
}

.card:hover img {
  transform: scale(1.05) !important;
}

.btn:hover {
  opacity: 0.9 !important;
  transform: scale(1.03) !important;
  transition: 0.2s !important;
}

</style>
</head>
<body>

<header>
  <div class="brand" style="display:flex; align-items:center; gap:10px;">
    <img src="logo.png" alt="logo" style="height:36px;border-radius:6px;">
    <h1>Ai1 Gujarati Snacks</h1>
  </div>

  <div style="display:flex; align-items:center; gap:16px;">
    <a href="index.html" style="padding:8px 14px; background:#ff9933; color:white; border-radius:8px; font-weight:700; text-decoration:none;">Home</a>

    <div class="phone">7984090490</div>

    <div onclick="openCartSheet()" style="cursor:pointer; position:relative; font-size:22px;">
      ðŸ›’
      <span id="cartBadge">0</span>
    </div>
  </div>
</header>

<h2 class="section-title">Products</h2>

<!-- Search Bar Added Below Products Title -->
<div style="max-width:420px; margin:10px auto 28px auto;">
<input type="text" id="smartSearch" placeholder="Search products..."
oninput="smartSearchProducts()"
style="width:100%; padding:12px 16px; border:2px solid #ff9933; border-radius:12px; font-size:16px; outline:none; box-shadow:0 3px 10px rgba(0,0,0,0.05);">
</div>


<script>
function smartSearchProducts() {
const term = document.getElementById("smartSearch").value.toLowerCase();
const cards = document.querySelectorAll('.card');


cards.forEach(card => {
const name = card.dataset.name.toLowerCase();
card.style.display = name.includes(term) ? 'block' : 'none';
});
}
</script>

<main class="container">
  <!-- PRODUCTS (identical markup to your homepage) -->
  <section class="products">

    <!-- PRODUCT 1 -->
    <div class="card" data-name="Methi Khakhra" data-price="135">
      <img src="methi-khakhra.png" alt="Methi Khakhra">
      <h3>Methi Khakhra</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Crispy, aromatic methi-flavored khakhra roasted to perfection. A traditional Gujarati snack perfect for tea-time.</p>
      <div class="price">â‚¹135</div>
      <div class="actions">
        <select class="qty-box">
          <option value="500g">500g</option>
          <option value="1kg">1kg</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 2 -->
    <div class="card" data-name="Sev" data-price="80">
      <img src="sev.png" alt="Sev">
      <h3>Sev</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Fresh, crunchy besan sev with authentic Gujarati spices. Light, tasty and perfect for snacking or topping dishes.</p>
      <div class="price">â‚¹80</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 3 -->
    <div class="card" data-name="Bhakharvadi" data-price="90">
      <img src="bhakharvadi.png" alt="Bhakharvadi">
      <h3>Bhakharvadi</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Traditional spiral snack stuffed with a sweetâ€“spicy filling. Crispy, flavorful and a perfect tea-time delight.</p>
      <div class="price">â‚¹90</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

      
    <!-- PRODUCT 4: Ganthiya -->
    <div class="card" data-name="Ganthiya" data-price="120">
      <img src="ganthiya.png" alt="Ganthiya">
      <h3>Ganthiya</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Soft, traditional Gujarati Ganthiya made with premium besan. Light, airy and perfect with tea.</p>
      <div class="price">â‚¹120</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 5: Papdi -->
    <div class="card" data-name="Papdi" data-price="110">
      <img src="papdi.png" alt="Papdi">
      <h3>Papdi</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Crispy, thin papdi perfect for chaats & snacking. Light crunch with authentic spices.</p>
      <div class="price">â‚¹110</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 6: Masala Sev -->
    <div class="card" data-name="Masala Sev" data-price="95">
      <img src="masala-sev.png" alt="Masala Sev">
      <h3>Masala Sev</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Spicy, tangy masala sev packed with bold Gujarati flavours. A perfect crunchy treat.</p>
      <div class="price">â‚¹95</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 7: Ratnami Sev -->
    <div class="card" data-name="Ratnami Sev" data-price="100">
      <img src="ratnami-sev.png" alt="Ratnami Sev">
      <h3>Ratnami (Spicy) Sev</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Extra spicy Ratnami sev with fiery masala. Perfect for spice lovers!</p>
      <div class="price">â‚¹100</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 8: Sakkarpara -->
    <div class="card" data-name="Sakkarpara" data-price="130">
      <img src="sakkarpara.png" alt="Sakkarpara">
      <h3>Sakkarpara</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Sweet, crunchy Sakkarpara made with pure ghee. A delightful bite-size treat.</p>
      <div class="price">â‚¹130</div>
      <div class="actions">
        <select class="qty-box">
          <option value="250g">250g</option>
          <option value="500g">500g</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 9: Bambooless Agarbatti -->
    <div class="card" data-name="Bambooless Agarbatti" data-price="150">
      <img src="bambooless-agarbatti.png" alt="Bambooless Agarbatti">
      <h3>Bambooless Agarbatti</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Eco-friendly, smokeless bambooless agarbatti with long-lasting fragrance.</p>
      <div class="price">â‚¹150</div>
      <div class="actions">
        <select class="qty-box">
          <option value="10 sticks">10 sticks</option>
          <option value="20 sticks">20 sticks</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 10: Bambooless Dhoop Stick -->
    <div class="card" data-name="Bambooless Dhoop Stick" data-price="160">
      <img src="bambooless-dhoop.png" alt="Bambooless Dhoop Stick">
      <h3>Bambooless Dhoop Stick</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Pure ayurvedic dhoop sticks with rich aroma. No bamboo, 100% natural.</p>
      <div class="price">â‚¹160</div>
      <div class="actions">
        <select class="qty-box">
          <option value="10 sticks">10 sticks</option>
          <option value="20 sticks">20 sticks</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

    <!-- PRODUCT 11: Hair Growth Oil -->
    <div class="card" data-name="Hair Growth Oil" data-price="199">
      <img src="hair-oil.png" alt="Hair Growth Oil">
      <h3>Hair Growth Oil</h3>
      <p class="desc" style="font-size:14px;color:#6b5b4d;line-height:20px;">Ayurvedic hair growth oil enriched with natural herbs for thicker, stronger hair.</p>
      <div class="price">â‚¹199</div>
      <div class="actions">
        <select class="qty-box">
          <option value="100ml">100ml</option>
          <option value="200ml">200ml</option>
        </select>
        <button class="btn whatsapp-btn" onclick="openOrderSheet(this.closest('.card'))">Order Now</button>
        <button class="btn cart-btn" onclick="addCartFromCard(this.closest('.card'))">Add to Cart</button>
      </div>
    </div>

</section>
</main>

<!-- CART SHEET (copied from homepage) -->
<div id="cartSheet" aria-hidden="true">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h2 style="font-size:20px;font-weight:800;">ðŸ›’ Your Cart</h2>
    <button onclick="minimizeCartSheet()" style="background:#fff; border:1px solid #ddd; border-radius:50%; width:34px; height:34px; font-size:18px; cursor:pointer;">â†“</button>
  </div>
  <div style="height:12px;"></div>
  <div id="cartItems"></div>
  <div id="cartTotalBar">
    <div style="display:flex; justify-content:space-between; font-size:16px;">
      <span>Subtotal</span>
      <span id="cartSubtotal">â‚¹0</span>
    </div>
    <button id="checkoutBtn" onclick="continueCheckout()">Continue to Checkout</button>
  </div>
</div>

<!-- ORDER SHEET (copied from homepage) -->
<div id="orderSheet" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="order-header">
    <div style="font-weight:800; font-size:18px;">Buy</div>
    <button onclick="closeOrderSheet()" style="background:transparent;border:none;font-size:20px;cursor:pointer;">âœ•</button>
  </div>

  <div class="order-product">
    <img id="os_img" src="" alt="product">
    <div class="meta">
      <div class="order-meta-title" id="os_name">Product</div>
      <div class="order-meta-weight" id="os_weight">500g</div>

      <div class="order-qty">
        <button onclick="changeOrderQty(-1)">âˆ’</button>
        <div id="os_qty" style="font-weight:800; font-size:18px;">1</div>
        <button onclick="changeOrderQty(1)">+</button>
      </div>
    </div>
    <div style="font-weight:800; font-size:18px;" id="os_line">â‚¹0</div>
  </div>

  <div style="margin-top:12px;">
    <label style="font-weight:700; font-size:14px;">Select weight</label>
    <select id="os_weight_sel" style="width:100%; padding:10px; margin-top:8px; border-radius:8px; border:1px solid #ddd;">
    </select>
  </div>

  <div class="order-info">
    <input id="os_name_field" class="fc-field order-info" placeholder="Full name">
    <input id="os_phone_field" class="fc-field order-info" placeholder="Phone number">
    <input id="os_house" class="fc-field order-info" placeholder="House / Flat No.">
    <input id="os_street" class="fc-field order-info" placeholder="Street / Area">
    <div style="display:flex; gap:8px;">
      <input id="os_city" class="fc-field order-info" placeholder="City" style="flex:1;">
      <input id="os_pin" class="fc-field order-info" placeholder="Pincode" style="width:110px;">
    </div>
  </div>

  <div style="margin-top:14px; display:flex; gap:10px;">
    <button class="btn cart-btn" style="flex:1;" onclick="addOrderToCart()">Add to Cart</button>
    <button class="btn whatsapp-btn" style="flex:1;" onclick="buyNow()">Buy Now</button>
  </div>

  <div class="order-price" style="margin-top:16px;">
    <div>Subtotal</div>
    <div id="os_total">â‚¹0</div>
  </div>
</div>

<script>
/* MERGED SCRIPT FROM HOMEPAGE - copied verbatim so products page uses same functions */
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxXGK5MY1jk4M8yBhQKEQjWu3SXoPfQK4rsgGgi-ibKl00eF60OdhaADE1fBZOZrU-0lA/exec";
let cart = [];
const weightMultipliers = { "250g": 1, "500g": 2, "1kg": 4 };
function safeParseInt(v){ return parseInt(String(v||"0").replace(/[^\d]/g,''),10) || 0; }
function findProductPrice(name){ const card = [...document.querySelectorAll(".card")].find(c => c.dataset.name === name); return safeParseInt(card?.dataset?.price); }
function openCartSheet(){ document.getElementById("cartSheet").classList.add("show"); }
function closeCartSheet(){ document.getElementById("cartSheet").classList.remove("show"); }
function addCartFromCard(card){ const name = card.dataset.name; const weight = card.querySelector(".qty-box").value; const existing = cart.find(i => i.name === name && i.weight === weight); if(existing) existing.qty++; else cart.push({ name, weight, qty:1 }); renderCart(); openCartSheet(); }
function renderCart(){ const box = document.getElementById("cartItems"); let subtotal = 0; if(!box) return; if(cart.length === 0){ box.innerHTML = `<p style="padding:20px;">Your cart is empty.</p>`; document.getElementById("cartSubtotal").innerText = "â‚¹0"; document.getElementById("cartBadge").innerText = "0"; return; } let html = ""; cart.forEach((item, index)=>{ const price = findProductPrice(item.name); const mult = weightMultipliers[item.weight] || 1; const line = price * mult * item.qty; subtotal += line; const img = item.name.toLowerCase().replace(/ /g, "-") + ".jpg"; html += `\n      <div class="cart-item">\n        <img src="${img}" alt="${item.name}">\n        <div class="cart-info">\n          <div class="cart-title">${item.name}</div>\n          <div class="cart-weight">${item.weight}</div>\n\n          <div class="cart-qty">\n            <button onclick="changeCartQty(${index}, -1)">âˆ’</button>\n            <span id="cart-qty-${index}" style="font-weight:700;">${item.qty}</span>\n            <button onclick="changeCartQty(${index}, 1)">+</button>\n          </div>\n\n          <div class="cart-remove" onclick="removeCartItem(${index})">Remove</div>\n        </div>\n\n        <div style="font-weight:700; font-size:15px;">â‚¹${line}</div>\n      </div>`; }); box.innerHTML = html; document.getElementById("cartSubtotal").innerText = "â‚¹" + subtotal; document.getElementById("cartBadge").innerText = cart.reduce((a,b)=>a + (parseInt(b.qty||1,10)||1), 0); }
function changeCartQty(i, d){ cart[i].qty = Math.max(1, (parseInt(cart[i].qty||1,10) || 1) + d); document.getElementById(`cart-qty-${i}`).innerText = cart[i].qty; renderCart(); }
function removeCartItem(i){ cart.splice(i,1); renderCart(); }
function continueCheckout(){ closeCartSheet(); openOrderSheetForCart(); }
let os_current = { name: "", weight: "500g", qty:1, unit:0 };
function openOrderSheet(card){ let name, weight, unit; if(card instanceof Element){ name = card.dataset.name; weight = card.querySelector(".qty-box")?.value || "500g"; unit = findProductPrice(name); } else if (typeof card === "object"){ name = card.name; weight = card.weight; unit = card.unit || findProductPrice(card.name); } else { return; } os_current.name = name; os_current.weight = weight; os_current.qty = 1; os_current.unit = unit; document.getElementById("os_img").src = name.toLowerCase().replace(/ /g,"-") + ".jpg"; document.getElementById("os_name").innerText = name; document.getElementById("os_weight").innerText = weight; document.getElementById("os_qty").innerText = os_current.qty; const cardEl = [...document.querySelectorAll(".card")].find(c => c.dataset.name === name); const sel = document.getElementById("os_weight_sel"); sel.innerHTML = ""; if(cardEl){ cardEl.querySelectorAll('.qty-box option').forEach(o=>{ const op = document.createElement("option"); op.value = o.value; op.text = o.text; sel.appendChild(op); }); sel.value = os_current.weight; } else { sel.innerHTML = '<option value="500g">500g</option><option value="250g">250g</option><option value="1kg">1kg</option>'; sel.value = os_current.weight; } computeOrderSheetPrice(); document.getElementById("orderSheet").classList.add("show"); }
function openOrderSheetForCart(){ if(cart.length === 0) { openOrderSheet({ name: "Items", weight: "", unit: 0 }); return; } os_current.name = "Multiple Items"; os_current.weight = ""; os_current.qty = 1; os_current.unit = 0; document.getElementById("os_img").src = "cart.jpg"; document.getElementById("os_name").innerText = "Multiple Items"; document.getElementById("os_weight").innerText = cart.map(i=>`${i.name} (${i.weight}) Ã— ${i.qty}`).join(" | "); document.getElementById("os_qty").innerText = "â€”"; document.getElementById("os_weight_sel").innerHTML = '<option value="">Multiple</option>'; computeOrderSheetPrice(); document.getElementById("orderSheet").classList.add("show"); }
function closeOrderSheet(){ document.getElementById("orderSheet").classList.remove("show"); }
function changeOrderQty(delta){ if(os_current.name === "Multiple Items") return; os_current.qty = Math.max(1, (parseInt(os_current.qty || 1,10) || 1) + delta); document.getElementById("os_qty").innerText = os_current.qty; computeOrderSheetPrice(); }
document.addEventListener('change', function(e){ if(e.target && e.target.id === "os_weight_sel"){ os_current.weight = e.target.value; document.getElementById("os_weight").innerText = os_current.weight; computeOrderSheetPrice(); } });
function computeOrderSheetPrice(){ let subtotal = 0; if(os_current.name === "Multiple Items"){ cart.forEach(i=>{ const p = findProductPrice(i.name); const m = weightMultipliers[i.weight] || 1; subtotal += p * m * i.qty; }); } else { const unit = os_current.unit || findProductPrice(os_current.name) || 0; const mult = weightMultipliers[os_current.weight] || 1; subtotal = unit * mult * (parseInt(os_current.qty||1,10) || 1); } document.getElementById("os_line").innerText = "â‚¹" + subtotal; document.getElementById("os_total").innerText = "â‚¹" + subtotal; }
function addOrderToCart(){ if(os_current.name === "Multiple Items"){ openCartSheet(); closeOrderSheet(); return; } const existing = cart.find(i => i.name === os_current.name && i.weight === os_current.weight); if(existing) existing.qty = existing.qty + (parseInt(os_current.qty || 1,10) || 1); else cart.push({ name: os_current.name, weight: os_current.weight, qty: parseInt(os_current.qty || 1,10) || 1 }); renderCart(); openCartSheet(); closeOrderSheet(); }
function buyNow(){ const buyer = document.getElementById("os_name_field").value.trim(); const phone = document.getElementById("os_phone_field").value.trim(); if(!buyer || !phone){ alert("Please enter name and phone number."); return; } let itemsStr = ""; let amount = 0; if(os_current.name === "Multiple Items"){ itemsStr = cart.map(i=>`${i.name} (${i.weight}) Ã— ${i.qty}`).join(" | "); cart.forEach(i=>{ const p = findProductPrice(i.name); const m = weightMultipliers[i.weight] || 1; amount += p * m * i.qty; }); } else { itemsStr = `${os_current.name} â€” ${os_current.weight} Ã— ${os_current.qty}`; const unit = os_current.unit || findProductPrice(os_current.name) || 0; const m = weightMultipliers[os_current.weight] || 1; amount = unit * m * (parseInt(os_current.qty||1,10) || 1); } const data = { name: buyer, phone, items: itemsStr, amount, house: document.getElementById("os_house").value || "", street: document.getElementById("os_street").value || "", city: document.getElementById("os_city").value || "", pincode: document.getElementById("os_pin").value || "", timestamp: new Date().toISOString() }; fetch(APPS_SCRIPT_URL, { method: "POST", mode: "no-cors", headers: { "Content-Type": "application/json" }, body: JSON.stringify(data) }); alert("Order submitted! We received your order."); closeOrderSheet(); }
function closeFullOrder(){ document.getElementById("fullOrderPage").style.display="none"; }
function minimizeCartSheet(){ document.getElementById("cartSheet").classList.remove("show"); }

/* initialize */
document.addEventListener('DOMContentLoaded', function(){ renderCart(); });
</script>
</body>
</html>



